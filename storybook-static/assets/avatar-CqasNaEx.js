import{r as l,j as i}from"./iframe-CMSACG2S.js";import{c as w}from"./index-C1tS_mMd.js";import{u as E}from"./index-OKNhNED5.js";import{u as f}from"./index-CFilcclQ.js";import{P as v}from"./index-BizsTmrf.js";import{s as _}from"./index-DlyPn96B.js";import{c as N}from"./index-B_jtOnfb.js";import{c as m}from"./utils-CDN07tui.js";function j(){return _.useSyncExternalStore(k,()=>!0,()=>!1)}function k(){return()=>{}}var g="Avatar",[R]=w(g),[z,b]=R(g),A=l.forwardRef((a,e)=>{const{__scopeAvatar:n,...r}=a,[s,t]=l.useState("idle");return i.jsx(z,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:t,children:i.jsx(v.span,{...r,ref:e})})});A.displayName=g;var h="AvatarImage",y=l.forwardRef((a,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...t}=a,u=b(h,n),o=C(r,t),d=E(c=>{s(c),u.onImageLoadingStatusChange(c)});return f(()=>{o!=="idle"&&d(o)},[o,d]),o==="loaded"?i.jsx(v.img,{...t,ref:e,src:r}):null});y.displayName=h;var L="AvatarFallback",S=l.forwardRef((a,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=a,t=b(L,n),[u,o]=l.useState(r===void 0);return l.useEffect(()=>{if(r!==void 0){const d=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(d)}},[r]),u&&t.imageLoadingStatus!=="loaded"?i.jsx(v.span,{...s,ref:e}):null});S.displayName=L;function x(a,e){return a?e?(a.src!==e&&(a.src=e),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function C(a,{referrerPolicy:e,crossOrigin:n}){const r=j(),s=l.useRef(null),t=r?(s.current||(s.current=new window.Image),s.current):null,[u,o]=l.useState(()=>x(t,a));return f(()=>{o(x(t,a))},[t,a]),f(()=>{const d=I=>()=>{o(I)};if(!t)return;const c=d("loaded"),p=d("error");return t.addEventListener("load",c),t.addEventListener("error",p),e&&(t.referrerPolicy=e),typeof n=="string"&&(t.crossOrigin=n),()=>{t.removeEventListener("load",c),t.removeEventListener("error",p)}},[t,n,e]),u}var F=A,P=y,M=S;const T=N("relative flex shrink-0 overflow-hidden",{variants:{size:{xs:"size-6 text-[10px]",sm:"size-8 text-xs",md:"size-10 text-sm",lg:"size-12 text-base",xl:"size-16 text-lg"},shape:{circle:"rounded-full",square:"rounded-lg"}},defaultVariants:{size:"md",shape:"circle"}});function V({className:a,size:e,shape:n,status:r,...s}){return i.jsxs("div",{className:"relative inline-block",children:[i.jsx(F,{"data-slot":"avatar",className:m(T({size:e,shape:n,className:a})),...s}),r&&i.jsx("span",{"data-slot":"avatar-status",className:m("absolute bottom-0 right-0 block size-[25%] rounded-full border-2 border-background",{"bg-emerald-500":r==="online","bg-slate-400":r==="offline","bg-amber-400":r==="away","bg-rose-500":r==="busy"})})]})}function q({className:a,...e}){return i.jsx(P,{"data-slot":"avatar-image",className:m("aspect-square size-full object-cover",a),...e})}function $({className:a,...e}){return i.jsx(M,{"data-slot":"avatar-fallback",className:m("bg-muted text-muted-foreground flex size-full items-center justify-center font-medium",a),...e})}V.__docgenInfo={description:"",methods:[],displayName:"Avatar",props:{status:{required:!1,tsType:{name:"union",raw:'"online" | "offline" | "away" | "busy"',elements:[{name:"literal",value:'"online"'},{name:"literal",value:'"offline"'},{name:"literal",value:'"away"'},{name:"literal",value:'"busy"'}]},description:""}},composes:["VariantProps"]};q.__docgenInfo={description:"",methods:[],displayName:"AvatarImage"};$.__docgenInfo={description:"",methods:[],displayName:"AvatarFallback"};export{V as A,q as a,$ as b};
